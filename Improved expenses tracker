import datetime

FILE_NAME = "expenses.txt"

def add_expense():
    name = input("Enter the name of the expense: ")
    amount = input("Enter the amount of the expense: ")

    try:
        amount_val = float(amount)
    except ValueError:
        print("Please enter a valid number for amount (e.g. 12.50).")
        return

    date_time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    with open(FILE_NAME, "a", encoding="utf-8") as file:
        file.write(f"{date_time} | {name} | {amount_val:.2f}\n")
    print("Expense added successfully ✅")

def view_expenses():
    try:
        with open(FILE_NAME, "r", encoding="utf-8") as file:
            expenses = file.readlines()
        total = 0
        print("\n📋 Expenses List:")
        for expense in expenses:
            print(expense.strip())
            amount = expense.strip().split("|")[-1].strip()
            total += float(amount)
        print(f"\n💰 Total expense amount: {total:.2f}")
    except FileNotFoundError:
        print("❌ No expenses found.")

while True:
    command = input("\nEnter a command (add / view / exit): ").lower()
    if command == "add":
        add_expense()
    elif command == "view":
        view_expenses()
    elif command == "exit":
        print("👋 Program terminated.")
        break
    else:
        print("❌ Invalid command. Please try again.")
